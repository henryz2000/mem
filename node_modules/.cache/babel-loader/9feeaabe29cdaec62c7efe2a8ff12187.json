{"ast":null,"code":"import _regeneratorRuntime from\"/Users/henryz2000/Downloads/chrome-react-seo-extension/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/henryz2000/Downloads/chrome-react-seo-extension/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/henryz2000/Downloads/chrome-react-seo-extension/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),title=_React$useState2[0],setTitle=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),headlines=_React$useState4[0],setHeadlines=_React$useState4[1];_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return chrome.tabs.sendMessage(0,{type:\"GET_DOM\"},function(response){console.log(\"test2\");setTitle(response.title);setHeadlines(response.headlines);});case 2:response=_context.sent;// do something with response here, not outside the function\nconsole.log(response);case 4:case\"end\":return _context.stop();}}},_callee);}))();// React.useEffect(() => {\n//   /**\n//    * We can't use \"chrome.runtime.sendMessage\" for sending messages from React.\n//    * For sending messages from React we need to specify which tab to send it to.\n//    */\n//   chrome.tabs &&\n//     chrome.tabs.query(\n//       {\n//         active: true,\n//         currentWindow: true,\n//       },\n//       (tabs) => {\n//         console.log(\"test\");\n//         /**\n//          * Sends a single message to the content script(s) in the specified tab,\n//          * with an optional callback to run when a response is sent back.\n//          *\n//          * The runtime.onMessage event is fired in each content script running\n//          * in the specified tab for the current extension.\n//          */\n//         chrome.tabs.sendMessage(\n//           tabs[0].id || 0,\n//           { type: \"GET_DOM\" } as DOMMessage,\n//           (response: DOMMessageResponse) => {\n//             console.log(\"test2\");\n//             setTitle(response.title);\n//             setHeadlines(response.headlines);\n//           }\n//         );\n//       }\n//     );\n// });\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"SEO Extension built with React!\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"SEOForm\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"SEOValidation\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"SEOValidationField\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"SEOValidationFieldTitle\",children:\"Title\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"SEOValidationFieldStatus \".concat(title.length<30||title.length>65?\"Error\":\"Ok\"),children:[title.length,\" Characters\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"SEOVAlidationFieldValue\",children:title})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"SEOValidation\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"SEOValidationField\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"SEOValidationFieldTitle\",children:\"Main Heading\"}),/*#__PURE__*/_jsx(\"span\",{className:\"SEOValidationFieldStatus \".concat(headlines.length!==1?\"Error\":\"Ok\"),children:headlines.length})]}),/*#__PURE__*/_jsx(\"div\",{className:\"SEOVAlidationFieldValue\",children:/*#__PURE__*/_jsx(\"ul\",{children:headlines.map(function(headline,index){return/*#__PURE__*/_jsx(\"li\",{children:headline},index);})})})]})]})]});}export default App;","map":{"version":3,"sources":["/Users/henryz2000/Downloads/chrome-react-seo-extension/src/App.tsx"],"names":["React","App","useState","title","setTitle","headlines","setHeadlines","chrome","tabs","sendMessage","type","response","console","log","length","map","headline","index"],"mappings":"wZAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,WAAP,C,wFAGA,QAASC,CAAAA,GAAT,EAAe,CACb,oBAA0BD,KAAK,CAACE,QAAN,CAAe,EAAf,CAA1B,oDAAOC,KAAP,qBAAcC,QAAd,qBACA,qBAAkCJ,KAAK,CAACE,QAAN,CAAyB,EAAzB,CAAlC,qDAAOG,SAAP,qBAAkBC,YAAlB,qBAEA,wDAAC,sKACwBC,CAAAA,MAAM,CAACC,IAAP,CAAYC,WAAZ,CACrB,CADqB,CAErB,CAAEC,IAAI,CAAE,SAAR,CAFqB,CAGrB,SAACC,QAAD,CAAkC,CAChCC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACAT,QAAQ,CAACO,QAAQ,CAACR,KAAV,CAAR,CACAG,YAAY,CAACK,QAAQ,CAACN,SAAV,CAAZ,CACD,CAPoB,CADxB,QACOM,QADP,eAUC;AACAC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAXD,sDAAD,KAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,uDADF,cAGE,YAAI,SAAS,CAAC,SAAd,wBACE,YAAI,SAAS,CAAC,eAAd,wBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,aAAM,SAAS,CAAC,yBAAhB,mBADF,cAEE,cACE,SAAS,oCACPR,KAAK,CAACW,MAAN,CAAe,EAAf,EAAqBX,KAAK,CAACW,MAAN,CAAe,EAApC,CAAyC,OAAzC,CAAmD,IAD5C,CADX,WAKGX,KAAK,CAACW,MALT,iBAFF,GADF,cAWE,YAAK,SAAS,CAAC,yBAAf,UAA0CX,KAA1C,EAXF,GADF,cAeE,YAAI,SAAS,CAAC,eAAd,wBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,aAAM,SAAS,CAAC,yBAAhB,0BADF,cAEE,aACE,SAAS,oCACPE,SAAS,CAACS,MAAV,GAAqB,CAArB,CAAyB,OAAzB,CAAmC,IAD5B,CADX,UAKGT,SAAS,CAACS,MALb,EAFF,GADF,cAWE,YAAK,SAAS,CAAC,yBAAf,uBACE,oBACGT,SAAS,CAACU,GAAV,CAAc,SAACC,QAAD,CAAWC,KAAX,qBACb,oBAAiBD,QAAjB,EAASC,KAAT,CADa,EAAd,CADH,EADF,EAXF,GAfF,GAHF,GADF,CAyCD,CAED,cAAehB,CAAAA,GAAf","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport { DOMMessage, DOMMessageResponse } from \"./types\";\n\nfunction App() {\n  const [title, setTitle] = React.useState(\"\");\n  const [headlines, setHeadlines] = React.useState<string[]>([]);\n\n  (async () => {\n    const response = await chrome.tabs.sendMessage(\n      0,\n      { type: \"GET_DOM\" } as DOMMessage,\n      (response: DOMMessageResponse) => {\n        console.log(\"test2\");\n        setTitle(response.title);\n        setHeadlines(response.headlines);\n      }\n    );\n    // do something with response here, not outside the function\n    console.log(response);\n  })();\n\n  // React.useEffect(() => {\n  //   /**\n  //    * We can't use \"chrome.runtime.sendMessage\" for sending messages from React.\n  //    * For sending messages from React we need to specify which tab to send it to.\n  //    */\n  //   chrome.tabs &&\n  //     chrome.tabs.query(\n  //       {\n  //         active: true,\n  //         currentWindow: true,\n  //       },\n  //       (tabs) => {\n  //         console.log(\"test\");\n  //         /**\n  //          * Sends a single message to the content script(s) in the specified tab,\n  //          * with an optional callback to run when a response is sent back.\n  //          *\n  //          * The runtime.onMessage event is fired in each content script running\n  //          * in the specified tab for the current extension.\n  //          */\n  //         chrome.tabs.sendMessage(\n  //           tabs[0].id || 0,\n  //           { type: \"GET_DOM\" } as DOMMessage,\n  //           (response: DOMMessageResponse) => {\n  //             console.log(\"test2\");\n  //             setTitle(response.title);\n  //             setHeadlines(response.headlines);\n  //           }\n  //         );\n  //       }\n  //     );\n  // });\n\n  return (\n    <div className=\"App\">\n      <h1>SEO Extension built with React!</h1>\n\n      <ul className=\"SEOForm\">\n        <li className=\"SEOValidation\">\n          <div className=\"SEOValidationField\">\n            <span className=\"SEOValidationFieldTitle\">Title</span>\n            <span\n              className={`SEOValidationFieldStatus ${\n                title.length < 30 || title.length > 65 ? \"Error\" : \"Ok\"\n              }`}\n            >\n              {title.length} Characters\n            </span>\n          </div>\n          <div className=\"SEOVAlidationFieldValue\">{title}</div>\n        </li>\n\n        <li className=\"SEOValidation\">\n          <div className=\"SEOValidationField\">\n            <span className=\"SEOValidationFieldTitle\">Main Heading</span>\n            <span\n              className={`SEOValidationFieldStatus ${\n                headlines.length !== 1 ? \"Error\" : \"Ok\"\n              }`}\n            >\n              {headlines.length}\n            </span>\n          </div>\n          <div className=\"SEOVAlidationFieldValue\">\n            <ul>\n              {headlines.map((headline, index) => (\n                <li key={index}>{headline}</li>\n              ))}\n            </ul>\n          </div>\n        </li>\n      </ul>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}