{"ast":null,"code":"import { visit } from 'unist-util-visit';\n\nvar rehypeIgnore = function rehypeIgnore() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$openDelimite = options.openDelimiter,\n      openDelimiter = _options$openDelimite === void 0 ? 'rehype:ignore:start' : _options$openDelimite,\n      _options$closeDelimit = options.closeDelimiter,\n      closeDelimiter = _options$closeDelimit === void 0 ? 'rehype:ignore:end' : _options$closeDelimit;\n  return function (tree) {\n    visit(tree, function (node, index, parent) {\n      if (node.type === 'element' || node.type === 'root') {\n        // const start = node.children.findIndex((item) => item.type === 'comment' && item.value === openDelimiter);\n        // const end = node.children.findIndex((item) => item.type === 'comment' && item.value === closeDelimiter);\n        // if (start > -1 && end > -1) {\n        //   node.children = node.children.filter((_, idx) => idx < start || idx > end);\n        // }\n        var start = false;\n        node.children = node.children.filter(function (item) {\n          if (item.type === 'raw' || item.type === 'comment') {\n            var str = (item.value || '').trim();\n            str = str.replace(/^<!--(.*?)-->/, '$1');\n\n            if (str === openDelimiter) {\n              start = true;\n              return false;\n            }\n\n            if (str === closeDelimiter) {\n              start = false;\n              return false;\n            }\n          }\n\n          return !start;\n        });\n      }\n    });\n  };\n};\n\nexport default rehypeIgnore;","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":"AAEA,SAAS,KAAT,QAAsB,kBAAtB;;AAwCA,IAAM,YAAY,GAAyC,SAArD,YAAqD,GAAiB;AAAA,MAAhB,OAAgB,uEAAN,EAAM;AAC1E,8BAAwF,OAAxF,CAAQ,aAAR;AAAA,MAAQ,aAAR,sCAAwB,qBAAxB;AAAA,8BAAwF,OAAxF,CAA+C,cAA/C;AAAA,MAA+C,cAA/C,sCAAgE,mBAAhE;AACA,SAAO,UAAC,IAAD,EAAS;AACd,IAAA,KAAK,CAAC,IAAD,EAAO,UAAC,IAAD,EAA2B,KAA3B,EAAkC,MAAlC,EAA4C;AACtD,UAAI,IAAI,CAAC,IAAL,KAAc,SAAd,IAA2B,IAAI,CAAC,IAAL,KAAc,MAA7C,EAAqD;AACnD;AACA;AACA;AACA;AACA;AACA,YAAI,KAAK,GAAG,KAAZ;AACA,QAAA,IAAI,CAAC,QAAL,GAAgB,IAAI,CAAC,QAAL,CAAc,MAAd,CAAqB,UAAC,IAAD,EAAS;AAC5C,cAAI,IAAI,CAAC,IAAL,KAAc,KAAd,IAAuB,IAAI,CAAC,IAAL,KAAc,SAAzC,EAAoD;AAClD,gBAAI,GAAG,GAAI,CAAC,IAAI,CAAC,KAAL,IAAc,EAAf,EAAmB,IAAnB,EAAX;AACA,YAAA,GAAG,GAAG,GAAG,CAAC,OAAJ,CAAY,eAAZ,EAA6B,IAA7B,CAAN;;AACA,gBAAI,GAAG,KAAK,aAAZ,EAA2B;AACvB,cAAA,KAAK,GAAG,IAAR;AACA,qBAAO,KAAP;AACH;;AACD,gBAAI,GAAG,KAAK,cAAZ,EAA4B;AACxB,cAAA,KAAK,GAAG,KAAR;AACA,qBAAO,KAAP;AACH;AACF;;AAED,iBAAO,CAAC,KAAR;AACD,SAfe,CAAhB;AAgBD;AACF,KAzBI,CAAL;AA0BD,GA3BD;AA4BD,CA9BD;;AAgCA,eAAe,YAAf","sourceRoot":"","sourcesContent":["import { visit } from 'unist-util-visit';\nconst rehypeIgnore = (options = {}) => {\n    const { openDelimiter = 'rehype:ignore:start', closeDelimiter = 'rehype:ignore:end' } = options;\n    return (tree) => {\n        visit(tree, (node, index, parent) => {\n            if (node.type === 'element' || node.type === 'root') {\n                // const start = node.children.findIndex((item) => item.type === 'comment' && item.value === openDelimiter);\n                // const end = node.children.findIndex((item) => item.type === 'comment' && item.value === closeDelimiter);\n                // if (start > -1 && end > -1) {\n                //   node.children = node.children.filter((_, idx) => idx < start || idx > end);\n                // }\n                let start = false;\n                node.children = node.children.filter((item) => {\n                    if (item.type === 'raw' || item.type === 'comment') {\n                        let str = (item.value || '').trim();\n                        str = str.replace(/^<!--(.*?)-->/, '$1');\n                        if (str === openDelimiter) {\n                            start = true;\n                            return false;\n                        }\n                        if (str === closeDelimiter) {\n                            start = false;\n                            return false;\n                        }\n                    }\n                    return !start;\n                });\n            }\n        });\n    };\n};\nexport default rehypeIgnore;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}