{"ast":null,"code":"import _objectSpread from \"/Users/henryz2000/Downloads/chrome-react-seo-extension/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { visit } from 'unist-util-visit';\nimport { propertiesHandle, nextChild, prevChild, getCommentObject } from './utils.js';\n\nvar rehypeAttrs = function rehypeAttrs() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$properties = options.properties,\n      properties = _options$properties === void 0 ? 'data' : _options$properties,\n      _options$codeBlockPar = options.codeBlockParames,\n      codeBlockParames = _options$codeBlockPar === void 0 ? true : _options$codeBlockPar;\n  return function (tree) {\n    visit(tree, 'element', function (node, index, parent) {\n      if (codeBlockParames && node.tagName === 'pre' && node && Array.isArray(node.children) && parent && Array.isArray(parent.children) && parent.children.length > 1) {\n        var firstChild = node.children[0];\n\n        if (firstChild && firstChild.tagName === 'code' && typeof index === 'number') {\n          var child = prevChild(parent.children, index);\n\n          if (child) {\n            var attr = getCommentObject(child);\n\n            if (Object.keys(attr).length > 0) {\n              node.properties = _objectSpread(_objectSpread({}, node.properties), {\n                'data-type': 'rehyp'\n              });\n              firstChild.properties = propertiesHandle(firstChild.properties, attr, properties);\n            }\n          }\n        }\n      }\n\n      if (/^(em|strong|b|a|i|p|pre|kbd|blockquote|h(1|2|3|4|5|6)|code|table|img|del|ul|ol)$/.test(node.tagName) && parent && Array.isArray(parent.children) && typeof index === 'number') {\n        var _child = nextChild(parent.children, index, '', codeBlockParames);\n\n        if (_child) {\n          var _attr = getCommentObject(_child);\n\n          if (Object.keys(_attr).length > 0) {\n            node.properties = propertiesHandle(node.properties, _attr, properties);\n          }\n        }\n      }\n    });\n  };\n};\n\nexport default rehypeAttrs;","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";AAEA,SAAS,KAAT,QAAsB,kBAAtB;AACA,SAAS,gBAAT,EAA2B,SAA3B,EAAsC,SAAtC,EAAiD,gBAAjD,QAAyE,YAAzE;;AA+CA,IAAM,WAAW,GAAwC,SAAnD,WAAmD,GAAiB;AAAA,MAAhB,OAAgB,uEAAN,EAAM;AACxE,4BAAyD,OAAzD,CAAQ,UAAR;AAAA,MAAQ,UAAR,oCAAqB,MAArB;AAAA,8BAAyD,OAAzD,CAA6B,gBAA7B;AAAA,MAA6B,gBAA7B,sCAAgD,IAAhD;AACA,SAAO,UAAC,IAAD,EAAS;AACd,IAAA,KAAK,CAAC,IAAD,EAAO,SAAP,EAAkB,UAAC,IAAD,EAAO,KAAP,EAAc,MAAd,EAAwB;AAC7C,UAAI,gBAAgB,IAAI,IAAI,CAAC,OAAL,KAAiB,KAArC,IAA8C,IAA9C,IAAsD,KAAK,CAAC,OAAN,CAAc,IAAI,CAAC,QAAnB,CAAtD,IAAsF,MAAtF,IAAgG,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,QAArB,CAAhG,IAAkI,MAAM,CAAC,QAAP,CAAgB,MAAhB,GAAyB,CAA/J,EAAkK;AAChK,YAAM,UAAU,GAAG,IAAI,CAAC,QAAL,CAAc,CAAd,CAAnB;;AACA,YAAI,UAAU,IAAI,UAAU,CAAC,OAAX,KAAuB,MAArC,IAA+C,OAAO,KAAP,KAAiB,QAApE,EAA8E;AAC5E,cAAM,KAAK,GAAG,SAAS,CAAC,MAAM,CAAC,QAAR,EAA+B,KAA/B,CAAvB;;AACA,cAAI,KAAJ,EAAW;AACT,gBAAM,IAAI,GAAG,gBAAgB,CAAC,KAAD,CAA7B;;AACA,gBAAI,MAAM,CAAC,IAAP,CAAY,IAAZ,EAAkB,MAAlB,GAA2B,CAA/B,EAAkC;AAChC,cAAA,IAAI,CAAC,UAAL,mCAAuB,IAAI,CAAC,UAA5B,GAA2C;AAAE,6BAAa;AAAf,eAA3C;AACA,cAAA,UAAU,CAAC,UAAX,GAAwB,gBAAgB,CAAC,UAAU,CAAC,UAAZ,EAAwB,IAAxB,EAA8B,UAA9B,CAAxC;AACD;AACF;AACF;AACF;;AAED,UAAI,mFAAmF,IAAnF,CAAwF,IAAI,CAAC,OAA7F,KAAyG,MAAzG,IAAmH,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,QAArB,CAAnH,IAAqJ,OAAO,KAAP,KAAiB,QAA1K,EAAoL;AAClL,YAAM,MAAK,GAAG,SAAS,CAAC,MAAM,CAAC,QAAR,EAAkB,KAAlB,EAAyB,EAAzB,EAA6B,gBAA7B,CAAvB;;AACA,YAAI,MAAJ,EAAW;AACT,cAAM,KAAI,GAAG,gBAAgB,CAAC,MAAD,CAA7B;;AACA,cAAI,MAAM,CAAC,IAAP,CAAY,KAAZ,EAAkB,MAAlB,GAA2B,CAA/B,EAAkC;AAChC,YAAA,IAAI,CAAC,UAAL,GAAkB,gBAAgB,CAAC,IAAI,CAAC,UAAN,EAAkB,KAAlB,EAAwB,UAAxB,CAAlC;AACD;AACF;AACF;AACF,KAxBI,CAAL;AAyBD,GA1BD;AA2BD,CA7BD;;AAgCA,eAAe,WAAf","sourceRoot":"","sourcesContent":["import { visit } from 'unist-util-visit';\nimport { propertiesHandle, nextChild, prevChild, getCommentObject } from './utils.js';\nconst rehypeAttrs = (options = {}) => {\n    const { properties = 'data', codeBlockParames = true } = options;\n    return (tree) => {\n        visit(tree, 'element', (node, index, parent) => {\n            if (codeBlockParames && node.tagName === 'pre' && node && Array.isArray(node.children) && parent && Array.isArray(parent.children) && parent.children.length > 1) {\n                const firstChild = node.children[0];\n                if (firstChild && firstChild.tagName === 'code' && typeof index === 'number') {\n                    const child = prevChild(parent.children, index);\n                    if (child) {\n                        const attr = getCommentObject(child);\n                        if (Object.keys(attr).length > 0) {\n                            node.properties = { ...node.properties, ...{ 'data-type': 'rehyp' } };\n                            firstChild.properties = propertiesHandle(firstChild.properties, attr, properties);\n                        }\n                    }\n                }\n            }\n            if (/^(em|strong|b|a|i|p|pre|kbd|blockquote|h(1|2|3|4|5|6)|code|table|img|del|ul|ol)$/.test(node.tagName) && parent && Array.isArray(parent.children) && typeof index === 'number') {\n                const child = nextChild(parent.children, index, '', codeBlockParames);\n                if (child) {\n                    const attr = getCommentObject(child);\n                    if (Object.keys(attr).length > 0) {\n                        node.properties = propertiesHandle(node.properties, attr, properties);\n                    }\n                }\n            }\n        });\n    };\n};\nexport default rehypeAttrs;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}