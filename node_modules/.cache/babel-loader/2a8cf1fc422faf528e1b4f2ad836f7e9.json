{"ast":null,"code":"/**\n * @typedef {import('mdast').Link} Link\n * @typedef {import('mdast').PhrasingContent} PhrasingContent\n *\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n * @typedef {import('mdast-util-from-markdown').Transform} FromMarkdownTransform\n *\n * @typedef {import('mdast-util-to-markdown').ConstructName} ConstructName\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n *\n * @typedef {import('mdast-util-find-and-replace').ReplaceFunction} ReplaceFunction\n * @typedef {import('mdast-util-find-and-replace').RegExpMatchObject} RegExpMatchObject\n */\nimport { ccount } from 'ccount';\nimport { findAndReplace } from 'mdast-util-find-and-replace';\nimport { unicodePunctuation, unicodeWhitespace } from 'micromark-util-character';\n/** @type {ConstructName} */\n\nvar inConstruct = 'phrasing';\n/** @type {Array<ConstructName>} */\n\nvar notInConstruct = ['autolink', 'link', 'image', 'label']; // To do: next major: expose functions instead of extensions.\n\n/**\n * Extension for `mdast-util-from-markdown` to enable GFM autolink literals.\n *\n * @type {FromMarkdownExtension}\n */\n\nexport var gfmAutolinkLiteralFromMarkdown = {\n  transforms: [transformGfmAutolinkLiterals],\n  enter: {\n    literalAutolink: enterLiteralAutolink,\n    literalAutolinkEmail: enterLiteralAutolinkValue,\n    literalAutolinkHttp: enterLiteralAutolinkValue,\n    literalAutolinkWww: enterLiteralAutolinkValue\n  },\n  exit: {\n    literalAutolink: exitLiteralAutolink,\n    literalAutolinkEmail: exitLiteralAutolinkEmail,\n    literalAutolinkHttp: exitLiteralAutolinkHttp,\n    literalAutolinkWww: exitLiteralAutolinkWww\n  }\n};\n/**\n * Extension for `mdast-util-to-markdown` to enable GFM autolink literals.\n *\n * @type {ToMarkdownExtension}\n */\n\nexport var gfmAutolinkLiteralToMarkdown = {\n  unsafe: [{\n    character: '@',\n    before: '[+\\\\-.\\\\w]',\n    after: '[\\\\-.\\\\w]',\n    inConstruct: inConstruct,\n    notInConstruct: notInConstruct\n  }, {\n    character: '.',\n    before: '[Ww]',\n    after: '[\\\\-.\\\\w]',\n    inConstruct: inConstruct,\n    notInConstruct: notInConstruct\n  }, {\n    character: ':',\n    before: '[ps]',\n    after: '\\\\/',\n    inConstruct: inConstruct,\n    notInConstruct: notInConstruct\n  }]\n};\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\n\nfunction enterLiteralAutolink(token) {\n  this.enter({\n    type: 'link',\n    title: null,\n    url: '',\n    children: []\n  }, token);\n}\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\n\n\nfunction enterLiteralAutolinkValue(token) {\n  this.config.enter.autolinkProtocol.call(this, token);\n}\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\n\n\nfunction exitLiteralAutolinkHttp(token) {\n  this.config.exit.autolinkProtocol.call(this, token);\n}\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\n\n\nfunction exitLiteralAutolinkWww(token) {\n  this.config.exit.data.call(this, token);\n  var node = this.stack[this.stack.length - 1];\n  node.url = 'http://' + this.sliceSerialize(token);\n}\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\n\n\nfunction exitLiteralAutolinkEmail(token) {\n  this.config.exit.autolinkEmail.call(this, token);\n}\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\n\n\nfunction exitLiteralAutolink(token) {\n  this.exit(token);\n}\n/** @type {FromMarkdownTransform} */\n\n\nfunction transformGfmAutolinkLiterals(tree) {\n  findAndReplace(tree, [[/(https?:\\/\\/|www(?=\\.))([-.\\w]+)([^ \\t\\r\\n]*)/gi, findUrl], [/([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)/g, findEmail]], {\n    ignore: ['link', 'linkReference']\n  });\n}\n/**\n * @type {ReplaceFunction}\n * @param {string} _\n * @param {string} protocol\n * @param {string} domain\n * @param {string} path\n * @param {RegExpMatchObject} match\n * @returns {Link | Array<PhrasingContent> | false}\n */\n// eslint-disable-next-line max-params\n\n\nfunction findUrl(_, protocol, domain, path, match) {\n  var prefix = ''; // Not an expected previous character.\n\n  if (!previous(match)) {\n    return false;\n  } // Treat `www` as part of the domain.\n\n\n  if (/^w/i.test(protocol)) {\n    domain = protocol + domain;\n    protocol = '';\n    prefix = 'http://';\n  }\n\n  if (!isCorrectDomain(domain)) {\n    return false;\n  }\n\n  var parts = splitUrl(domain + path);\n  if (!parts[0]) return false;\n  /** @type {Link} */\n\n  var result = {\n    type: 'link',\n    title: null,\n    url: prefix + protocol + parts[0],\n    children: [{\n      type: 'text',\n      value: protocol + parts[0]\n    }]\n  };\n\n  if (parts[1]) {\n    return [result, {\n      type: 'text',\n      value: parts[1]\n    }];\n  }\n\n  return result;\n}\n/**\n * @type {ReplaceFunction}\n * @param {string} _\n * @param {string} atext\n * @param {string} label\n * @param {RegExpMatchObject} match\n * @returns {Link | false}\n */\n\n\nfunction findEmail(_, atext, label, match) {\n  if ( // Not an expected previous character.\n  !previous(match, true) || // Label ends in not allowed character.\n  /[-\\d_]$/.test(label)) {\n    return false;\n  }\n\n  return {\n    type: 'link',\n    title: null,\n    url: 'mailto:' + atext + '@' + label,\n    children: [{\n      type: 'text',\n      value: atext + '@' + label\n    }]\n  };\n}\n/**\n * @param {string} domain\n * @returns {boolean}\n */\n\n\nfunction isCorrectDomain(domain) {\n  var parts = domain.split('.');\n\n  if (parts.length < 2 || parts[parts.length - 1] && (/_/.test(parts[parts.length - 1]) || !/[a-zA-Z\\d]/.test(parts[parts.length - 1])) || parts[parts.length - 2] && (/_/.test(parts[parts.length - 2]) || !/[a-zA-Z\\d]/.test(parts[parts.length - 2]))) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * @param {string} url\n * @returns {[string, string | undefined]}\n */\n\n\nfunction splitUrl(url) {\n  var trailExec = /[!\"&'),.:;<>?\\]}]+$/.exec(url);\n\n  if (!trailExec) {\n    return [url, undefined];\n  }\n\n  url = url.slice(0, trailExec.index);\n  var trail = trailExec[0];\n  var closingParenIndex = trail.indexOf(')');\n  var openingParens = ccount(url, '(');\n  var closingParens = ccount(url, ')');\n\n  while (closingParenIndex !== -1 && openingParens > closingParens) {\n    url += trail.slice(0, closingParenIndex + 1);\n    trail = trail.slice(closingParenIndex + 1);\n    closingParenIndex = trail.indexOf(')');\n    closingParens++;\n  }\n\n  return [url, trail];\n}\n/**\n * @param {RegExpMatchObject} match\n * @param {boolean | null | undefined} [email=false]\n * @returns {boolean}\n */\n\n\nfunction previous(match, email) {\n  var code = match.input.charCodeAt(match.index - 1);\n  return (match.index === 0 || unicodeWhitespace(code) || unicodePunctuation(code)) && (!email || code !== 47);\n}","map":{"version":3,"sources":["/Users/henryz2000/Downloads/chrome-react-seo-extension/node_modules/mdast-util-gfm-autolink-literal/lib/index.js"],"names":["ccount","findAndReplace","unicodePunctuation","unicodeWhitespace","inConstruct","notInConstruct","gfmAutolinkLiteralFromMarkdown","transforms","transformGfmAutolinkLiterals","enter","literalAutolink","enterLiteralAutolink","literalAutolinkEmail","enterLiteralAutolinkValue","literalAutolinkHttp","literalAutolinkWww","exit","exitLiteralAutolink","exitLiteralAutolinkEmail","exitLiteralAutolinkHttp","exitLiteralAutolinkWww","gfmAutolinkLiteralToMarkdown","unsafe","character","before","after","token","type","title","url","children","config","autolinkProtocol","call","data","node","stack","length","sliceSerialize","autolinkEmail","tree","findUrl","findEmail","ignore","_","protocol","domain","path","match","prefix","previous","test","isCorrectDomain","parts","splitUrl","result","value","atext","label","split","trailExec","exec","undefined","slice","index","trail","closingParenIndex","indexOf","openingParens","closingParens","email","code","input","charCodeAt"],"mappings":"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","sourcesContent":["/**\n * @typedef {import('mdast').Link} Link\n * @typedef {import('mdast').PhrasingContent} PhrasingContent\n *\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n * @typedef {import('mdast-util-from-markdown').Transform} FromMarkdownTransform\n *\n * @typedef {import('mdast-util-to-markdown').ConstructName} ConstructName\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n *\n * @typedef {import('mdast-util-find-and-replace').ReplaceFunction} ReplaceFunction\n * @typedef {import('mdast-util-find-and-replace').RegExpMatchObject} RegExpMatchObject\n */\n\nimport {ccount} from 'ccount'\nimport {findAndReplace} from 'mdast-util-find-and-replace'\nimport {unicodePunctuation, unicodeWhitespace} from 'micromark-util-character'\n\n/** @type {ConstructName} */\nconst inConstruct = 'phrasing'\n/** @type {Array<ConstructName>} */\nconst notInConstruct = ['autolink', 'link', 'image', 'label']\n\n// To do: next major: expose functions instead of extensions.\n\n/**\n * Extension for `mdast-util-from-markdown` to enable GFM autolink literals.\n *\n * @type {FromMarkdownExtension}\n */\nexport const gfmAutolinkLiteralFromMarkdown = {\n  transforms: [transformGfmAutolinkLiterals],\n  enter: {\n    literalAutolink: enterLiteralAutolink,\n    literalAutolinkEmail: enterLiteralAutolinkValue,\n    literalAutolinkHttp: enterLiteralAutolinkValue,\n    literalAutolinkWww: enterLiteralAutolinkValue\n  },\n  exit: {\n    literalAutolink: exitLiteralAutolink,\n    literalAutolinkEmail: exitLiteralAutolinkEmail,\n    literalAutolinkHttp: exitLiteralAutolinkHttp,\n    literalAutolinkWww: exitLiteralAutolinkWww\n  }\n}\n\n/**\n * Extension for `mdast-util-to-markdown` to enable GFM autolink literals.\n *\n * @type {ToMarkdownExtension}\n */\nexport const gfmAutolinkLiteralToMarkdown = {\n  unsafe: [\n    {\n      character: '@',\n      before: '[+\\\\-.\\\\w]',\n      after: '[\\\\-.\\\\w]',\n      inConstruct,\n      notInConstruct\n    },\n    {\n      character: '.',\n      before: '[Ww]',\n      after: '[\\\\-.\\\\w]',\n      inConstruct,\n      notInConstruct\n    },\n    {character: ':', before: '[ps]', after: '\\\\/', inConstruct, notInConstruct}\n  ]\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterLiteralAutolink(token) {\n  this.enter({type: 'link', title: null, url: '', children: []}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterLiteralAutolinkValue(token) {\n  this.config.enter.autolinkProtocol.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkHttp(token) {\n  this.config.exit.autolinkProtocol.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkWww(token) {\n  this.config.exit.data.call(this, token)\n  const node = /** @type {Link} */ (this.stack[this.stack.length - 1])\n  node.url = 'http://' + this.sliceSerialize(token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkEmail(token) {\n  this.config.exit.autolinkEmail.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolink(token) {\n  this.exit(token)\n}\n\n/** @type {FromMarkdownTransform} */\nfunction transformGfmAutolinkLiterals(tree) {\n  findAndReplace(\n    tree,\n    [\n      [/(https?:\\/\\/|www(?=\\.))([-.\\w]+)([^ \\t\\r\\n]*)/gi, findUrl],\n      [/([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)/g, findEmail]\n    ],\n    {ignore: ['link', 'linkReference']}\n  )\n}\n\n/**\n * @type {ReplaceFunction}\n * @param {string} _\n * @param {string} protocol\n * @param {string} domain\n * @param {string} path\n * @param {RegExpMatchObject} match\n * @returns {Link | Array<PhrasingContent> | false}\n */\n// eslint-disable-next-line max-params\nfunction findUrl(_, protocol, domain, path, match) {\n  let prefix = ''\n\n  // Not an expected previous character.\n  if (!previous(match)) {\n    return false\n  }\n\n  // Treat `www` as part of the domain.\n  if (/^w/i.test(protocol)) {\n    domain = protocol + domain\n    protocol = ''\n    prefix = 'http://'\n  }\n\n  if (!isCorrectDomain(domain)) {\n    return false\n  }\n\n  const parts = splitUrl(domain + path)\n\n  if (!parts[0]) return false\n\n  /** @type {Link} */\n  const result = {\n    type: 'link',\n    title: null,\n    url: prefix + protocol + parts[0],\n    children: [{type: 'text', value: protocol + parts[0]}]\n  }\n\n  if (parts[1]) {\n    return [result, {type: 'text', value: parts[1]}]\n  }\n\n  return result\n}\n\n/**\n * @type {ReplaceFunction}\n * @param {string} _\n * @param {string} atext\n * @param {string} label\n * @param {RegExpMatchObject} match\n * @returns {Link | false}\n */\nfunction findEmail(_, atext, label, match) {\n  if (\n    // Not an expected previous character.\n    !previous(match, true) ||\n    // Label ends in not allowed character.\n    /[-\\d_]$/.test(label)\n  ) {\n    return false\n  }\n\n  return {\n    type: 'link',\n    title: null,\n    url: 'mailto:' + atext + '@' + label,\n    children: [{type: 'text', value: atext + '@' + label}]\n  }\n}\n\n/**\n * @param {string} domain\n * @returns {boolean}\n */\nfunction isCorrectDomain(domain) {\n  const parts = domain.split('.')\n\n  if (\n    parts.length < 2 ||\n    (parts[parts.length - 1] &&\n      (/_/.test(parts[parts.length - 1]) ||\n        !/[a-zA-Z\\d]/.test(parts[parts.length - 1]))) ||\n    (parts[parts.length - 2] &&\n      (/_/.test(parts[parts.length - 2]) ||\n        !/[a-zA-Z\\d]/.test(parts[parts.length - 2])))\n  ) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * @param {string} url\n * @returns {[string, string | undefined]}\n */\nfunction splitUrl(url) {\n  const trailExec = /[!\"&'),.:;<>?\\]}]+$/.exec(url)\n\n  if (!trailExec) {\n    return [url, undefined]\n  }\n\n  url = url.slice(0, trailExec.index)\n\n  let trail = trailExec[0]\n  let closingParenIndex = trail.indexOf(')')\n  const openingParens = ccount(url, '(')\n  let closingParens = ccount(url, ')')\n\n  while (closingParenIndex !== -1 && openingParens > closingParens) {\n    url += trail.slice(0, closingParenIndex + 1)\n    trail = trail.slice(closingParenIndex + 1)\n    closingParenIndex = trail.indexOf(')')\n    closingParens++\n  }\n\n  return [url, trail]\n}\n\n/**\n * @param {RegExpMatchObject} match\n * @param {boolean | null | undefined} [email=false]\n * @returns {boolean}\n */\nfunction previous(match, email) {\n  const code = match.input.charCodeAt(match.index - 1)\n\n  return (\n    (match.index === 0 ||\n      unicodeWhitespace(code) ||\n      unicodePunctuation(code)) &&\n    (!email || code !== 47)\n  )\n}\n"]},"metadata":{},"sourceType":"module"}