{"ast":null,"code":"import _objectSpread from \"/Users/henryz2000/Downloads/chrome-react-seo-extension/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nexport var getURLParameters = function getURLParameters() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(function (a, v) {\n    return a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1), a;\n  }, {});\n};\nexport var prevChild = function prevChild() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var index = arguments.length > 1 ? arguments[1] : undefined;\n  var i = index;\n\n  while (i > -1) {\n    i--;\n    if (!data[i]) return;\n\n    if (data[i] && data[i].value && data[i].value.replace(/(\\n|\\s)/g, '') !== '' || data[i].type !== 'text') {\n      if (!/^rehype:/.test(data[i].value) || data[i].type !== 'comment') return;\n      return data[i];\n    }\n  }\n\n  return;\n};\nexport var nextChild = function nextChild() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var index = arguments.length > 1 ? arguments[1] : undefined;\n  var tagName = arguments.length > 2 ? arguments[2] : undefined;\n  var codeBlockParames = arguments.length > 3 ? arguments[3] : undefined;\n  var i = index;\n\n  while (i < data.length) {\n    i++;\n\n    if (tagName) {\n      var element = data[i];\n\n      if (element && element.value && element.value.replace(/(\\n|\\s)/g, '') !== '' || data[i] && data[i].type === 'element') {\n        return element.tagName === tagName ? element : undefined;\n      }\n    } else {\n      var _element = data[i];\n      if (!_element || _element.type === 'element') return;\n      if (_element.type === 'text' && _element.value.replace(/(\\n|\\s)/g, '') !== '') return;\n\n      if (_element.type && /^(comment|raw)$/ig.test(_element.type)) {\n        if (_element.value && !/^rehype:/.test(_element.value.replace(/^(\\s+)?<!--(.*?)-->/, '$2') || '')) {\n          return;\n        }\n\n        ;\n\n        if (codeBlockParames) {\n          var nextNode = nextChild(data, i, 'pre', codeBlockParames);\n          if (nextNode) return;\n          _element.value = (_element.value || '').replace(/^(\\n|\\s)+/, '');\n          return _element;\n        } else {\n          _element.value = (_element.value || '').replace(/^(\\n|\\s)+/, '');\n          return _element;\n        }\n      }\n    }\n  }\n\n  return;\n};\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\n\nexport var getCommentObject = function getCommentObject(_ref) {\n  var _ref$value = _ref.value,\n      value = _ref$value === void 0 ? '' : _ref$value;\n  var param = getURLParameters(value.replace(/^<!--(.*?)-->/, '$1').replace(/^rehype:/, ''));\n  Object.keys(param).forEach(function (keyName) {\n    if (param[keyName] === 'true') {\n      param[keyName] = true;\n    }\n\n    if (param[keyName] === 'false') {\n      param[keyName] = false;\n    }\n\n    if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName]) && !isNaN(+param[keyName])) {\n      param[keyName] = +param[keyName];\n    }\n  });\n  return param;\n};\nexport var propertiesHandle = function propertiesHandle(defaultAttrs, attrs, type) {\n  if (type === 'string') {\n    return _objectSpread(_objectSpread({}, defaultAttrs), {}, {\n      'data-config': JSON.stringify(_objectSpread(_objectSpread({}, attrs), {}, {\n        rehyp: true\n      }))\n    });\n  } else if (type === 'attr') {\n    return _objectSpread(_objectSpread({}, defaultAttrs), attrs);\n  }\n\n  return _objectSpread(_objectSpread({}, defaultAttrs), {}, {\n    'data-config': _objectSpread(_objectSpread({}, attrs), {}, {\n      rehyp: true\n    })\n  });\n};","map":{"version":3,"sources":["../src/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["export const getURLParameters = (url = '') => (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce((a, v) => ((a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1)), a), {});\nexport const prevChild = (data = [], index) => {\n    let i = index;\n    while (i > -1) {\n        i--;\n        if (!data[i])\n            return;\n        if ((data[i] && data[i].value && data[i].value.replace(/(\\n|\\s)/g, '') !== '') || data[i].type !== 'text') {\n            if (!/^rehype:/.test(data[i].value) || data[i].type !== 'comment')\n                return;\n            return data[i];\n        }\n    }\n    return;\n};\nexport const nextChild = (data = [], index, tagName, codeBlockParames) => {\n    let i = index;\n    while (i < data.length) {\n        i++;\n        if (tagName) {\n            const element = data[i];\n            if (element && element.value && element.value.replace(/(\\n|\\s)/g, '') !== '' || data[i] && data[i].type === 'element') {\n                return element.tagName === tagName ? element : undefined;\n            }\n        }\n        else {\n            const element = data[i];\n            if (!element || element.type === 'element')\n                return;\n            if (element.type === 'text' && element.value.replace(/(\\n|\\s)/g, '') !== '')\n                return;\n            if (element.type && /^(comment|raw)$/ig.test(element.type)) {\n                if (element.value && !/^rehype:/.test(element.value.replace(/^(\\s+)?<!--(.*?)-->/, '$2') || '')) {\n                    return;\n                }\n                ;\n                if (codeBlockParames) {\n                    const nextNode = nextChild(data, i, 'pre', codeBlockParames);\n                    if (nextNode)\n                        return;\n                    element.value = (element.value || '').replace(/^(\\n|\\s)+/, '');\n                    return element;\n                }\n                else {\n                    element.value = (element.value || '').replace(/^(\\n|\\s)+/, '');\n                    return element;\n                }\n            }\n        }\n    }\n    return;\n};\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\nexport const getCommentObject = ({ value = '' }) => {\n    const param = getURLParameters(value.replace(/^<!--(.*?)-->/, '$1').replace(/^rehype:/, ''));\n    Object.keys(param).forEach((keyName) => {\n        if (param[keyName] === 'true') {\n            param[keyName] = true;\n        }\n        if (param[keyName] === 'false') {\n            param[keyName] = false;\n        }\n        if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName]) && !isNaN(+param[keyName])) {\n            param[keyName] = +param[keyName];\n        }\n    });\n    return param;\n};\nexport const propertiesHandle = (defaultAttrs, attrs, type) => {\n    if (type === 'string') {\n        return { ...defaultAttrs, 'data-config': JSON.stringify({ ...attrs, rehyp: true }) };\n    }\n    else if (type === 'attr') {\n        return { ...defaultAttrs, ...attrs };\n    }\n    return { ...defaultAttrs, 'data-config': { ...attrs, rehyp: true } };\n};\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"module"}