{"ast":null,"code":"import _slicedToArray from \"/Users/henryz2000/Downloads/chrome-react-seo-extension/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"prefixCls\", \"className\", \"value\", \"commands\", \"commandsFilter\", \"direction\", \"extraCommands\", \"height\", \"enableScroll\", \"visibleDragbar\", \"highlightEnable\", \"preview\", \"fullscreen\", \"overflow\", \"previewOptions\", \"textareaProps\", \"maxHeight\", \"minHeight\", \"autoFocus\", \"tabSize\", \"defaultTabEnable\", \"onChange\", \"onStatistics\", \"onHeightChange\", \"hideToolbar\", \"toolbarBottom\", \"components\", \"renderTextarea\"];\nimport React, { useEffect, useReducer, useMemo, useRef, useImperativeHandle } from 'react';\nimport MarkdownPreview from '@uiw/react-markdown-preview';\nimport TextArea from './components/TextArea';\nimport Toolbar from './components/Toolbar';\nimport DragBar from './components/DragBar';\nimport { getCommands, getExtraCommands, TextAreaCommandOrchestrator } from './commands';\nimport { reducer, EditorContext } from './Context';\nimport \"./index.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction setGroupPopFalse(data) {\n  if (data === void 0) {\n    data = {};\n  }\n\n  Object.keys(data).forEach(function (keyname) {\n    data[keyname] = false;\n  });\n  return data;\n}\n\nvar InternalMDEditor = function InternalMDEditor(props, ref) {\n  var _ref = props || {},\n      _ref$prefixCls = _ref.prefixCls,\n      prefixCls = _ref$prefixCls === void 0 ? 'w-md-editor' : _ref$prefixCls,\n      className = _ref.className,\n      propsValue = _ref.value,\n      _ref$commands = _ref.commands,\n      commands = _ref$commands === void 0 ? getCommands() : _ref$commands,\n      commandsFilter = _ref.commandsFilter,\n      direction = _ref.direction,\n      _ref$extraCommands = _ref.extraCommands,\n      extraCommands = _ref$extraCommands === void 0 ? getExtraCommands() : _ref$extraCommands,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 200 : _ref$height,\n      _ref$enableScroll = _ref.enableScroll,\n      enableScroll = _ref$enableScroll === void 0 ? true : _ref$enableScroll,\n      _ref$visibleDragbar = _ref.visibleDragbar,\n      visibleDragbar = _ref$visibleDragbar === void 0 ? typeof props.visiableDragbar === 'boolean' ? props.visiableDragbar : true : _ref$visibleDragbar,\n      _ref$highlightEnable = _ref.highlightEnable,\n      highlightEnable = _ref$highlightEnable === void 0 ? true : _ref$highlightEnable,\n      _ref$preview = _ref.preview,\n      previewType = _ref$preview === void 0 ? 'live' : _ref$preview,\n      _ref$fullscreen = _ref.fullscreen,\n      fullscreen = _ref$fullscreen === void 0 ? false : _ref$fullscreen,\n      _ref$overflow = _ref.overflow,\n      overflow = _ref$overflow === void 0 ? true : _ref$overflow,\n      _ref$previewOptions = _ref.previewOptions,\n      previewOptions = _ref$previewOptions === void 0 ? {} : _ref$previewOptions,\n      textareaProps = _ref.textareaProps,\n      _ref$maxHeight = _ref.maxHeight,\n      maxHeight = _ref$maxHeight === void 0 ? 1200 : _ref$maxHeight,\n      _ref$minHeight = _ref.minHeight,\n      minHeight = _ref$minHeight === void 0 ? 100 : _ref$minHeight,\n      autoFocus = _ref.autoFocus,\n      _ref$tabSize = _ref.tabSize,\n      tabSize = _ref$tabSize === void 0 ? 2 : _ref$tabSize,\n      _ref$defaultTabEnable = _ref.defaultTabEnable,\n      defaultTabEnable = _ref$defaultTabEnable === void 0 ? false : _ref$defaultTabEnable,\n      onChange = _ref.onChange,\n      onStatistics = _ref.onStatistics,\n      onHeightChange = _ref.onHeightChange,\n      hideToolbar = _ref.hideToolbar,\n      _ref$toolbarBottom = _ref.toolbarBottom,\n      toolbarBottom = _ref$toolbarBottom === void 0 ? false : _ref$toolbarBottom,\n      components = _ref.components,\n      renderTextarea = _ref.renderTextarea,\n      other = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var cmds = commands.map(function (item) {\n    return commandsFilter ? commandsFilter(item, false) : item;\n  }).filter(Boolean);\n  var extraCmds = extraCommands.map(function (item) {\n    return commandsFilter ? commandsFilter(item, true) : item;\n  }).filter(Boolean);\n\n  var _useReducer = useReducer(reducer, {\n    markdown: propsValue,\n    preview: previewType,\n    components: components,\n    height: height,\n    highlightEnable: highlightEnable,\n    tabSize: tabSize,\n    defaultTabEnable: defaultTabEnable,\n    scrollTop: 0,\n    scrollTopPreview: 0,\n    commands: cmds,\n    extraCommands: extraCmds,\n    fullscreen: fullscreen,\n    barPopup: {}\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var container = useRef(null);\n  var previewRef = useRef(null);\n  var enableScrollRef = useRef(enableScroll);\n  useImperativeHandle(ref, function () {\n    return _extends({}, state, {\n      container: container.current,\n      dispatch: dispatch\n    });\n  });\n  useMemo(function () {\n    return enableScrollRef.current = enableScroll;\n  }, [enableScroll]);\n  useEffect(function () {\n    var stateInit = {};\n\n    if (container.current) {\n      stateInit.container = container.current || undefined;\n    }\n\n    stateInit.markdown = propsValue || '';\n    stateInit.barPopup = {};\n\n    if (dispatch) {\n      dispatch(_extends({}, state, stateInit));\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  var cls = [className, 'wmde-markdown-var', direction ? prefixCls + \"-\" + direction : null, prefixCls, state.preview ? prefixCls + \"-show-\" + state.preview : null, state.fullscreen ? prefixCls + \"-fullscreen\" : null].filter(Boolean).join(' ').trim();\n  useMemo(function () {\n    return propsValue !== state.markdown && dispatch({\n      markdown: propsValue || ''\n    });\n  }, [propsValue, state.markdown]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useMemo(function () {\n    return previewType !== state.preview && dispatch({\n      preview: previewType\n    });\n  }, [previewType]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useMemo(function () {\n    return tabSize !== state.tabSize && dispatch({\n      tabSize: tabSize\n    });\n  }, [tabSize]);\n  useMemo(function () {\n    return highlightEnable !== state.highlightEnable && dispatch({\n      highlightEnable: highlightEnable\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [highlightEnable]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useMemo(function () {\n    return autoFocus !== state.autoFocus && dispatch({\n      autoFocus: autoFocus\n    });\n  }, [autoFocus]);\n  useMemo(function () {\n    return fullscreen !== state.fullscreen && dispatch({\n      fullscreen: fullscreen\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [fullscreen]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useMemo(function () {\n    return height !== state.height && dispatch({\n      height: height\n    });\n  }, [height]);\n  useMemo(function () {\n    return height !== state.height && onHeightChange && onHeightChange(state.height, height, state);\n  }, [height, onHeightChange, state]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useMemo(function () {\n    return commands !== state.commands && dispatch({\n      commands: cmds\n    });\n  }, [props.commands]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useMemo(function () {\n    return extraCommands !== state.extraCommands && dispatch({\n      extraCommands: extraCmds\n    });\n  }, [props.extraCommands]);\n  var textareaDomRef = useRef();\n  var active = useRef('preview');\n  var initScroll = useRef(false);\n  useMemo(function () {\n    textareaDomRef.current = state.textareaWarp;\n\n    if (state.textareaWarp) {\n      state.textareaWarp.addEventListener('mouseover', function () {\n        active.current = 'text';\n      });\n      state.textareaWarp.addEventListener('mouseleave', function () {\n        active.current = 'preview';\n      });\n    }\n  }, [state.textareaWarp]);\n\n  var handleScroll = function handleScroll(e, type) {\n    if (!enableScrollRef.current) return;\n    var textareaDom = textareaDomRef.current;\n    var previewDom = previewRef.current ? previewRef.current : undefined;\n\n    if (!initScroll.current) {\n      active.current = type;\n      initScroll.current = true;\n    }\n\n    if (textareaDom && previewDom) {\n      var scale = (textareaDom.scrollHeight - textareaDom.offsetHeight) / (previewDom.scrollHeight - previewDom.offsetHeight);\n\n      if (e.target === textareaDom && active.current === 'text') {\n        previewDom.scrollTop = textareaDom.scrollTop / scale;\n      }\n\n      if (e.target === previewDom && active.current === 'preview') {\n        textareaDom.scrollTop = previewDom.scrollTop * scale;\n      }\n\n      var scrollTop = 0;\n\n      if (active.current === 'text') {\n        scrollTop = textareaDom.scrollTop || 0;\n      } else if (active.current === 'preview') {\n        scrollTop = previewDom.scrollTop || 0;\n      }\n\n      dispatch({\n        scrollTop: scrollTop\n      });\n    }\n  };\n\n  var previewClassName = prefixCls + \"-preview \" + (previewOptions.className || '');\n\n  var handlePreviewScroll = function handlePreviewScroll(e) {\n    return handleScroll(e, 'preview');\n  };\n\n  var mdPreview = useMemo(function () {\n    return /*#__PURE__*/_jsx(\"div\", {\n      ref: previewRef,\n      className: previewClassName,\n      children: /*#__PURE__*/_jsx(MarkdownPreview, _extends({}, previewOptions, {\n        onScroll: handlePreviewScroll,\n        source: state.markdown || ''\n      }))\n    });\n  }, [previewClassName, previewOptions, state.markdown]);\n  var preview = (components == null ? void 0 : components.preview) && (components == null ? void 0 : components.preview(state.markdown || '', state, dispatch));\n\n  if (preview && /*#__PURE__*/React.isValidElement(preview)) {\n    mdPreview = /*#__PURE__*/_jsx(\"div\", {\n      className: previewClassName,\n      ref: previewRef,\n      onScroll: handlePreviewScroll,\n      children: preview\n    });\n  }\n\n  var containerStyle = _extends({}, other.style, {\n    height: state.height || '100%'\n  });\n\n  var containerClick = function containerClick() {\n    return dispatch({\n      barPopup: _extends({}, setGroupPopFalse(state.barPopup))\n    });\n  };\n\n  var dragBarChange = function dragBarChange(newHeight) {\n    return dispatch({\n      height: newHeight\n    });\n  };\n\n  var changeHandle = function changeHandle(evn) {\n    onChange && onChange(evn.target.value, evn, state);\n\n    if (textareaProps && textareaProps.onChange) {\n      textareaProps.onChange(evn);\n    }\n\n    if (state.textarea && state.textarea instanceof HTMLTextAreaElement && onStatistics) {\n      var obj = new TextAreaCommandOrchestrator(state.textarea);\n      var objState = obj.getState() || {};\n      onStatistics(_extends({}, objState, {\n        lineCount: evn.target.value.split('\\n').length,\n        length: evn.target.value.length\n      }));\n    }\n  };\n\n  return /*#__PURE__*/_jsx(EditorContext.Provider, {\n    value: _extends({}, state, {\n      dispatch: dispatch\n    }),\n    children: /*#__PURE__*/_jsxs(\"div\", _extends({\n      ref: container,\n      className: cls\n    }, other, {\n      onClick: containerClick,\n      style: containerStyle,\n      children: [!hideToolbar && !toolbarBottom && /*#__PURE__*/_jsx(Toolbar, {\n        prefixCls: prefixCls,\n        overflow: overflow,\n        toolbarBottom: toolbarBottom\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: prefixCls + \"-content\",\n        children: [/(edit|live)/.test(state.preview || '') && /*#__PURE__*/_jsx(TextArea, _extends({\n          className: prefixCls + \"-input\",\n          prefixCls: prefixCls,\n          autoFocus: autoFocus\n        }, textareaProps, {\n          onChange: changeHandle,\n          renderTextarea: (components == null ? void 0 : components.textarea) || renderTextarea,\n          onScroll: function onScroll(e) {\n            return handleScroll(e, 'text');\n          }\n        })), /(live|preview)/.test(state.preview || '') && mdPreview]\n      }), visibleDragbar && !state.fullscreen && /*#__PURE__*/_jsx(DragBar, {\n        prefixCls: prefixCls,\n        height: state.height,\n        maxHeight: maxHeight,\n        minHeight: minHeight,\n        onChange: dragBarChange\n      }), !hideToolbar && toolbarBottom && /*#__PURE__*/_jsx(Toolbar, {\n        prefixCls: prefixCls,\n        overflow: overflow,\n        toolbarBottom: toolbarBottom\n      })]\n    }))\n  });\n};\n\nvar mdEditor = /*#__PURE__*/React.forwardRef(InternalMDEditor);\nmdEditor.Markdown = MarkdownPreview;\nexport default mdEditor;","map":{"version":3,"sources":["/Users/henryz2000/Downloads/chrome-react-seo-extension/node_modules/@uiw/react-md-editor/esm/Editor.js"],"names":["_extends","_objectWithoutPropertiesLoose","_excluded","React","useEffect","useReducer","useMemo","useRef","useImperativeHandle","MarkdownPreview","TextArea","Toolbar","DragBar","getCommands","getExtraCommands","TextAreaCommandOrchestrator","reducer","EditorContext","jsx","_jsx","jsxs","_jsxs","setGroupPopFalse","data","Object","keys","forEach","keyname","InternalMDEditor","props","ref","_ref","prefixCls","className","propsValue","value","commands","commandsFilter","direction","extraCommands","height","enableScroll","visibleDragbar","visiableDragbar","highlightEnable","preview","previewType","fullscreen","overflow","previewOptions","textareaProps","maxHeight","minHeight","autoFocus","tabSize","defaultTabEnable","onChange","onStatistics","onHeightChange","hideToolbar","toolbarBottom","components","renderTextarea","other","cmds","map","item","filter","Boolean","extraCmds","markdown","scrollTop","scrollTopPreview","barPopup","state","dispatch","container","previewRef","enableScrollRef","current","stateInit","undefined","cls","join","trim","textareaDomRef","active","initScroll","textareaWarp","addEventListener","handleScroll","e","type","textareaDom","previewDom","scale","scrollHeight","offsetHeight","target","previewClassName","handlePreviewScroll","mdPreview","children","onScroll","source","isValidElement","containerStyle","style","containerClick","dragBarChange","newHeight","changeHandle","evn","textarea","HTMLTextAreaElement","obj","objState","getState","lineCount","split","length","Provider","onClick","test","mdEditor","forwardRef","Markdown"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"prefixCls\", \"className\", \"value\", \"commands\", \"commandsFilter\", \"direction\", \"extraCommands\", \"height\", \"enableScroll\", \"visibleDragbar\", \"highlightEnable\", \"preview\", \"fullscreen\", \"overflow\", \"previewOptions\", \"textareaProps\", \"maxHeight\", \"minHeight\", \"autoFocus\", \"tabSize\", \"defaultTabEnable\", \"onChange\", \"onStatistics\", \"onHeightChange\", \"hideToolbar\", \"toolbarBottom\", \"components\", \"renderTextarea\"];\nimport React, { useEffect, useReducer, useMemo, useRef, useImperativeHandle } from 'react';\nimport MarkdownPreview from '@uiw/react-markdown-preview';\nimport TextArea from './components/TextArea';\nimport Toolbar from './components/Toolbar';\nimport DragBar from './components/DragBar';\nimport { getCommands, getExtraCommands, TextAreaCommandOrchestrator } from './commands';\nimport { reducer, EditorContext } from './Context';\nimport \"./index.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction setGroupPopFalse(data) {\n  if (data === void 0) {\n    data = {};\n  }\n  Object.keys(data).forEach(keyname => {\n    data[keyname] = false;\n  });\n  return data;\n}\nvar InternalMDEditor = (props, ref) => {\n  var _ref = props || {},\n    {\n      prefixCls = 'w-md-editor',\n      className,\n      value: propsValue,\n      commands = getCommands(),\n      commandsFilter,\n      direction,\n      extraCommands = getExtraCommands(),\n      height = 200,\n      enableScroll = true,\n      visibleDragbar = typeof props.visiableDragbar === 'boolean' ? props.visiableDragbar : true,\n      highlightEnable = true,\n      preview: previewType = 'live',\n      fullscreen = false,\n      overflow = true,\n      previewOptions = {},\n      textareaProps,\n      maxHeight = 1200,\n      minHeight = 100,\n      autoFocus,\n      tabSize = 2,\n      defaultTabEnable = false,\n      onChange,\n      onStatistics,\n      onHeightChange,\n      hideToolbar,\n      toolbarBottom = false,\n      components,\n      renderTextarea\n    } = _ref,\n    other = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var cmds = commands.map(item => commandsFilter ? commandsFilter(item, false) : item).filter(Boolean);\n  var extraCmds = extraCommands.map(item => commandsFilter ? commandsFilter(item, true) : item).filter(Boolean);\n  var [state, dispatch] = useReducer(reducer, {\n    markdown: propsValue,\n    preview: previewType,\n    components,\n    height,\n    highlightEnable,\n    tabSize,\n    defaultTabEnable,\n    scrollTop: 0,\n    scrollTopPreview: 0,\n    commands: cmds,\n    extraCommands: extraCmds,\n    fullscreen,\n    barPopup: {}\n  });\n  var container = useRef(null);\n  var previewRef = useRef(null);\n  var enableScrollRef = useRef(enableScroll);\n  useImperativeHandle(ref, () => _extends({}, state, {\n    container: container.current,\n    dispatch\n  }));\n  useMemo(() => enableScrollRef.current = enableScroll, [enableScroll]);\n  useEffect(() => {\n    var stateInit = {};\n    if (container.current) {\n      stateInit.container = container.current || undefined;\n    }\n    stateInit.markdown = propsValue || '';\n    stateInit.barPopup = {};\n    if (dispatch) {\n      dispatch(_extends({}, state, stateInit));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var cls = [className, 'wmde-markdown-var', direction ? prefixCls + \"-\" + direction : null, prefixCls, state.preview ? prefixCls + \"-show-\" + state.preview : null, state.fullscreen ? prefixCls + \"-fullscreen\" : null].filter(Boolean).join(' ').trim();\n  useMemo(() => propsValue !== state.markdown && dispatch({\n    markdown: propsValue || ''\n  }), [propsValue, state.markdown]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => previewType !== state.preview && dispatch({\n    preview: previewType\n  }), [previewType]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => tabSize !== state.tabSize && dispatch({\n    tabSize\n  }), [tabSize]);\n  useMemo(() => highlightEnable !== state.highlightEnable && dispatch({\n    highlightEnable\n  }),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [highlightEnable]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => autoFocus !== state.autoFocus && dispatch({\n    autoFocus: autoFocus\n  }), [autoFocus]);\n  useMemo(() => fullscreen !== state.fullscreen && dispatch({\n    fullscreen: fullscreen\n  }),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [fullscreen]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => height !== state.height && dispatch({\n    height: height\n  }), [height]);\n  useMemo(() => height !== state.height && onHeightChange && onHeightChange(state.height, height, state), [height, onHeightChange, state]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => commands !== state.commands && dispatch({\n    commands: cmds\n  }), [props.commands]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => extraCommands !== state.extraCommands && dispatch({\n    extraCommands: extraCmds\n  }), [props.extraCommands]);\n  var textareaDomRef = useRef();\n  var active = useRef('preview');\n  var initScroll = useRef(false);\n  useMemo(() => {\n    textareaDomRef.current = state.textareaWarp;\n    if (state.textareaWarp) {\n      state.textareaWarp.addEventListener('mouseover', () => {\n        active.current = 'text';\n      });\n      state.textareaWarp.addEventListener('mouseleave', () => {\n        active.current = 'preview';\n      });\n    }\n  }, [state.textareaWarp]);\n  var handleScroll = (e, type) => {\n    if (!enableScrollRef.current) return;\n    var textareaDom = textareaDomRef.current;\n    var previewDom = previewRef.current ? previewRef.current : undefined;\n    if (!initScroll.current) {\n      active.current = type;\n      initScroll.current = true;\n    }\n    if (textareaDom && previewDom) {\n      var scale = (textareaDom.scrollHeight - textareaDom.offsetHeight) / (previewDom.scrollHeight - previewDom.offsetHeight);\n      if (e.target === textareaDom && active.current === 'text') {\n        previewDom.scrollTop = textareaDom.scrollTop / scale;\n      }\n      if (e.target === previewDom && active.current === 'preview') {\n        textareaDom.scrollTop = previewDom.scrollTop * scale;\n      }\n      var scrollTop = 0;\n      if (active.current === 'text') {\n        scrollTop = textareaDom.scrollTop || 0;\n      } else if (active.current === 'preview') {\n        scrollTop = previewDom.scrollTop || 0;\n      }\n      dispatch({\n        scrollTop\n      });\n    }\n  };\n  var previewClassName = prefixCls + \"-preview \" + (previewOptions.className || '');\n  var handlePreviewScroll = e => handleScroll(e, 'preview');\n  var mdPreview = useMemo(() => /*#__PURE__*/_jsx(\"div\", {\n    ref: previewRef,\n    className: previewClassName,\n    children: /*#__PURE__*/_jsx(MarkdownPreview, _extends({}, previewOptions, {\n      onScroll: handlePreviewScroll,\n      source: state.markdown || ''\n    }))\n  }), [previewClassName, previewOptions, state.markdown]);\n  var preview = (components == null ? void 0 : components.preview) && (components == null ? void 0 : components.preview(state.markdown || '', state, dispatch));\n  if (preview && /*#__PURE__*/React.isValidElement(preview)) {\n    mdPreview = /*#__PURE__*/_jsx(\"div\", {\n      className: previewClassName,\n      ref: previewRef,\n      onScroll: handlePreviewScroll,\n      children: preview\n    });\n  }\n  var containerStyle = _extends({}, other.style, {\n    height: state.height || '100%'\n  });\n  var containerClick = () => dispatch({\n    barPopup: _extends({}, setGroupPopFalse(state.barPopup))\n  });\n  var dragBarChange = newHeight => dispatch({\n    height: newHeight\n  });\n  var changeHandle = evn => {\n    onChange && onChange(evn.target.value, evn, state);\n    if (textareaProps && textareaProps.onChange) {\n      textareaProps.onChange(evn);\n    }\n    if (state.textarea && state.textarea instanceof HTMLTextAreaElement && onStatistics) {\n      var obj = new TextAreaCommandOrchestrator(state.textarea);\n      var objState = obj.getState() || {};\n      onStatistics(_extends({}, objState, {\n        lineCount: evn.target.value.split('\\n').length,\n        length: evn.target.value.length\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsx(EditorContext.Provider, {\n    value: _extends({}, state, {\n      dispatch\n    }),\n    children: /*#__PURE__*/_jsxs(\"div\", _extends({\n      ref: container,\n      className: cls\n    }, other, {\n      onClick: containerClick,\n      style: containerStyle,\n      children: [!hideToolbar && !toolbarBottom && /*#__PURE__*/_jsx(Toolbar, {\n        prefixCls: prefixCls,\n        overflow: overflow,\n        toolbarBottom: toolbarBottom\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: prefixCls + \"-content\",\n        children: [/(edit|live)/.test(state.preview || '') && /*#__PURE__*/_jsx(TextArea, _extends({\n          className: prefixCls + \"-input\",\n          prefixCls: prefixCls,\n          autoFocus: autoFocus\n        }, textareaProps, {\n          onChange: changeHandle,\n          renderTextarea: (components == null ? void 0 : components.textarea) || renderTextarea,\n          onScroll: e => handleScroll(e, 'text')\n        })), /(live|preview)/.test(state.preview || '') && mdPreview]\n      }), visibleDragbar && !state.fullscreen && /*#__PURE__*/_jsx(DragBar, {\n        prefixCls: prefixCls,\n        height: state.height,\n        maxHeight: maxHeight,\n        minHeight: minHeight,\n        onChange: dragBarChange\n      }), !hideToolbar && toolbarBottom && /*#__PURE__*/_jsx(Toolbar, {\n        prefixCls: prefixCls,\n        overflow: overflow,\n        toolbarBottom: toolbarBottom\n      })]\n    }))\n  });\n};\nvar mdEditor = /*#__PURE__*/React.forwardRef(InternalMDEditor);\nmdEditor.Markdown = MarkdownPreview;\nexport default mdEditor;"]},"metadata":{},"sourceType":"module"}