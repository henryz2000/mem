"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports._handleGraphqlRequestErrors = void 0;
const request_1 = require("../../../utils/errors/request");
const _handleGraphqlRequestErrors = ({ err }) => {
    var _a, _b;
    if ("response" in err && "errors" in err.response) {
        const graphqlErrors = err.response.errors;
        const firstError = graphqlErrors[0];
        /** We don't know how to handle this error, so we re-throw. */
        if (firstError) {
            const extensionCode = (_b = (_a = firstError.extensions) === null || _a === void 0 ? void 0 : _a.code) !== null && _b !== void 0 ? _b : "CLIENT::UNKNOWN_ERROR";
            throw new request_1.ClientRequestError({
                message: `Request failed with error code: ${extensionCode}`,
            });
        }
    }
    /** We don't know how to handle this error, so we re-throw. */
    throw new request_1.ClientRequestError({
        message: `Request failed: ${err.message || JSON.stringify(err)}`,
    });
};
exports._handleGraphqlRequestErrors = _handleGraphqlRequestErrors;
//# sourceMappingURL=handleErrors.js.map